# コミット作成

## 概要

Conventional Commits形式に従って、対話的にGitコミットを作成してください。

## 実行手順

### 1. 変更内容の分析

- `git status` で変更ファイルを確認してください
- `git diff --staged` でステージされた変更を分析してください
- 変更がない場合は、「ステージされた変更がありません」と伝えてください

### 2. 言語の選択

以下のように言語選択を求めてください：

```text
コミットメッセージの言語を選択してください:
- ja: 日本語
- en: 英語

選択 (ja/en):
```

- ja/en以外が入力された場合は「無効な選択です。もう一度選択してください (ja/en)」と再入力を促してください

### 3. コミットメッセージ候補の提示

変更内容に応じて適切な数のコミットメッセージ候補を提示してください（候補は簡潔さや視点を変えて差別化）：

```text
分析結果：

ステージされた変更:
[変更ファイルリスト]

変更タイプ: [type] ([typeの説明])

おすすめのコミットメッセージ：

1. type: description
   理由: [選定理由]

2. type: alternative description
   理由: [選定理由]

... (必要に応じて追加)

n. type: nth description
   理由: [選定理由]

選択してください:
```

※ 番号が若いほど推奨度が高くなっています

#### 推奨候補数

変更内容の複雑さに応じて、2〜6個程度の候補を提示することを推奨します。

#### 例

**新機能追加の場合:**

```text
1. feat: ユーザー認証機能を追加
   理由: 新しい認証システムが完全に実装されたため

2. feat: login/logoutページを実装
   理由: 認証機能の具体的な実装内容を明示
```

**バグ修正の場合:**

```text
1. fix: ログイン時のエラーハンドリングを修正
   理由: 明確な問題の解決を示している

2. fix: 認証エラーの処理を改善
   理由: より詳細な修正内容を表現
```

**リファクタリングの場合:**

```text
1. refactor: 認証ロジックを統合
   理由: 構造改善の主目的を明確に表現

2. refactor: 重複コードを削除し、関数を統合
   理由: 具体的な改善内容を詳細に説明
```

**ドキュメントの場合:**

```text
1. docs: APIドキュメントを更新
   理由: 変更内容を簡潔に表現

2. docs: 認証APIのREADMEに使用例を追加
   理由: 具体的な更新内容と対象を明示
```

**テストの場合:**

```text
1. test: ユーザー認証のユニットテストを追加
   理由: 新しいテストの対象を明確に表現

2. test: ログイン機能のE2Eテストを実装
   理由: テストの種類と対象機能を具体的に明示
```

**スタイルの場合:**

```text
1. style: コードフォーマットを統一
   理由: 変更の目的を簡潔に表現

2. style: ESLintの警告を解消
   理由: 具体的な改善内容を明示
```

**ビルドの場合:**

```text
1. build: webpackの設定を最適化
   理由: ビルドツールと変更内容を明確に表現

2. build: 本番環境向けビルドプロセスを改善
   理由: 変更の対象と目的を具体的に明示
```

**CIの場合:**

```text
1. ci: GitHub Actionsのワークフローを追加
   理由: CIツールと変更内容を明確に表現

2. ci: テスト自動化のパイプラインを設定
   理由: CI/CDの具体的な目的を明示
```

**パフォーマンスの場合:**

```text
1. perf: APIレスポンスのキャッシュを実装
   理由: パフォーマンス改善の手法を明確に表現

2. perf: データベースクエリを最適化
   理由: 最適化の対象を具体的に明示
```

**雑務の場合:**

```text
1. chore: 依存関係を更新
   理由: メンテナンス作業を簡潔に表現

2. chore: 開発環境の設定ファイルを整理
   理由: 具体的な作業内容を明示
```

### 4. コミットの実行

- ユーザーが番号を選択したら、そのメッセージでコミットを実行してください
- 候補にない番号が入力された場合は「無効な番号です。もう一度番号を入力してください」と再入力を促してください

## Conventional Commits規則

### 使用可能なtype（優先順）

※ 複数のtypeに該当する場合は、上位のtypeを優先して選択

- feat: 新機能
  - 新しい機能の追加

- fix: バグ修正
  - バグの修正

- refactor: リファクタリング
  - バグ修正でも機能追加でもないコード変更

- docs: ドキュメント
  - ドキュメントのみの変更

- test: テスト
  - 不足しているテストの追加や既存のテストの修正

- style: スタイル
  - コードの意味に影響しない変更（空白、フォーマット、セミコロンの追加など）

- build: ビルド
  - ビルドシステムや外部依存関係に影響する変更

- ci: CI
  - CI設定ファイルやスクリプトの変更

- perf: パフォーマンス
  - パフォーマンスを向上させるコード変更

- chore: 雑務
  - srcやtestファイルを変更しないその他の変更

### メッセージ形式

- `type: description` の1行形式を基本とする
- typeは常に英語（feat, fix等）を使用
- 英語の場合: descriptionは現在形・命令形で記述（例: "add" not "added" nor "adds"）
- 日本語の場合: descriptionは簡潔な説明文で記述（例: `feat: 新機能を追加`）
- 1行目は72文字以内に収める
