# review-claude-spec

## 概要

Claude Code仕様書の品質をレビューする

## ⚠️ 重要な注意事項

- **引数でファイルパスの指定が必須**です
- **Markdownファイル（.md）のみ対象**とします

## 実行手順

### 1. 対象ファイルの確認

引数で指定されたファイルを確認してください

#### エラーハンドリング

1. **ファイル未指定**
   - エラー：「レビュー対象のファイルを指定してください」を出力し、処理を終了
2. **ファイル不存在**
   - エラー：「指定されたファイルが見つかりません: [ファイルパス]」を出力し、処理を終了
3. **Markdownファイル以外**
   - .md拡張子でない場合、エラー：「Markdownファイルを指定してください: [ファイルパス]」を出力し、処理を終了

### 2. ファイルの読み込み

Readツールで指定されたファイルを読み込んでください

### 3. レビューの実施

以下の4つの観点すべてについて仕様書をレビューしてください

#### 3.1 Claudeの理解可能性（最重要）

- **指示の明確性**: 各指示が一意に解釈できるか
- **曖昧な表現の検出**: 「適切に」「必要に応じて」など判断基準が不明確な表現
- **判断に迷う箇所**: Claudeが実行時に追加質問をする必要がありそうな箇所
- **条件分岐の明確性**: if/elseの条件が明確で網羅的か

#### 3.2 コマンドの正確性

- **bash構文**: シェルコマンドの構文エラーがないか
- **gitコマンド**: gitコマンドとオプションが正しいか
- **パイプ・リダイレクト**: `|`, `>`, `>>`, `2>&1`などの使用が適切か
- **コマンドの存在**: 使用されているコマンドが一般的に利用可能か

#### 3.3 手順の論理性

- 前提条件の明示
- 手順の順序の妥当性
- 分岐条件の明確性
- 終了条件の定義

#### 3.4 エラーハンドリング

- エラーケースの網羅性
- エラーメッセージの明確性
- リカバリー手順の有無

### 4. レビュー結果の出力

以下のルールに従って出力してください

#### 問題の記載方法

各カテゴリで見つかった問題を以下の形式で記載してください

- 問題内容と該当行番号
- 問題がない場合は「問題なし」と記載
- 問題の影響度は記載せず、事実のみを報告

**出力ルール:**

- テンプレートの内容のみを出力する
- テキスト形式で出力する（```text```ブロックで囲む）
- テンプレート以外の説明や補足は追加しない
- `{{! ... }}` で囲まれた例文は出力しない（内部参照用）
- `${...}` の変数は実データで置き換える
- `[...]` のプレースホルダは適切な内容を生成して置き換える

#### 出力テンプレート

```text
════════════════════════════════════════
📊 レビュー結果
════════════════════════════════════════

対象: ${file_path}
────────────────────────────────────────

🧠 Claudeの理解可能性
────────────────────────────────────────
[理解可能性の問題リスト]
{{! • 「適切に処理」という表現が曖昧 (line 45) }}
{{! • ユーザー選択後の処理が不明確 (line 67-70) }}
{{! • エラー時の分岐条件が網羅的でない (line 89) }}

💻 コマンドの正確性
────────────────────────────────────────
[コマンドの問題リスト]
{{! • git branch --show-current は古いGitで使用不可 (line 23) }}
{{! • パイプの使い方が誤っている: grep | | sed (line 34) }}
{{! • 存在しないオプション: ls --color=never (line 56) }}

🔗 手順の論理性
────────────────────────────────────────
[論理性の問題リスト]
{{! • 前提条件が明示されていない (git初期化の確認) }}
{{! • 手順3の後に手順5に飛んでいる }}
{{! • 終了条件が定義されていない }}

⚠️ エラーハンドリング
────────────────────────────────────────
[エラーハンドリングの問題リスト]
{{! • ファイル読み込みエラーの処理がない }}
{{! • ネットワークエラーの考慮なし }}
{{! • リカバリー手順が未定義 }}
```
