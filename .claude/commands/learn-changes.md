# learn-changes

## 概要

ローカルブランチ間の差分を調査し、今後の開発を進めるための情報を収集する。

## 実行手順

### 1. 現在の状態確認

```bash
# 現在のブランチを確認
git branch --show-current

# 未コミットの変更を確認
git status --short
```

### 2. ベースブランチの選択

```bash
# ローカルブランチ一覧を取得（現在のブランチを除く）
git branch | grep -v '^\*' | sed 's/^  //'
```

- 他のローカルブランチが存在する場合：
  - 番号付きリストでベースブランチを表示してください
  - ユーザーが番号を選択したら、そのブランチをベースとして使用してください
  - 無効な番号が入力された場合は「無効な番号です。もう一度番号を入力してください」と再入力を促してください
- ローカルブランチが存在しない場合：
  - 「比較可能なブランチがありません」と表示して処理を終了してください

### 3. 差分の取得と分析

選択されたベースブランチとの差分を取得し、変更内容を分析してください：

```bash
# 差分の統計情報を取得
git diff ${selected_branch}...HEAD --stat

# 変更されたファイル一覧を取得
git diff ${selected_branch}...HEAD --name-status

# 未コミットの変更を確認
git diff --staged
git diff

# 実際の差分内容を取得して分析
git diff ${selected_branch}...HEAD
```

- 変更がない場合：
  - 「変更内容がありません」を出力し、処理を終了してください

収集した情報をもとに、以下を理解してください：

- 追加/変更/削除された機能
- 変更の主な目的
- 技術的な実装方法
- 影響範囲

### 4. 変更要約の生成

**出力ルール:**

- テンプレートの内容のみを出力する
- テキスト形式で出力する（```text```ブロックで囲む）
- テンプレート以外の説明や補足は追加しない
- 角括弧で始まる指示行（例: `[変更の概要]`）は実際の内容に置き換える
- 変更を機能単位や関連性でグループ化する
- 簡潔で分かりやすい表現を使用する

**出力テンプレート:**

```text
========================================
📋 変更要約
========================================

◆ [変更カテゴリ]

• [具体的な変更内容]
• [具体的な変更内容]

◆ [変更カテゴリ]

• [具体的な変更内容]
• [具体的な変更内容]
```

**出力例:**

```text
========================================
📋 変更要約
========================================

◆ 電話番号ログイン機能の追加

• usersテーブルにphoneカラムを追加
• Userモデルにphone属性を追加
• SMSによる認証コード送信機能を実装
• 電話番号でのログインAPIエンドポイントを作成

◆ パスワードリセット機能の改善

• メール再送機能を実装
• レート制限を追加（1分間に1回まで）
• 再送時のエラーメッセージを改善

◆ APIレスポンス形式の統一

• 全エンドポイントで{success, data, message}形式に統一
• エラー時のHTTPステータスコードを適切に設定
• レスポンスのバリデーションを追加
```
