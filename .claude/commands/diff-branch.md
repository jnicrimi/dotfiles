# ブランチ間差分調査

## 概要

ローカルブランチ間の差分を対話的に調査し、今後の開発を進めるための情報を収集してください。

## 実行手順

### 1. 現在の状態確認

- 現在のブランチと作業状況を把握してください

```bash
# 現在のブランチを確認
git branch --show-current

# 未コミットの変更を確認
git status --short
```

- 未コミットの変更がある場合は、それらも含めて差分を理解してください

### 2. 比較対象ブランチの選択と検証

- 現在のブランチ以外のローカルブランチを番号付きリストで提示してください

```bash
# ローカルブランチ一覧を取得（現在のブランチを除く）
git branch | grep -v '^\*' | sed 's/^  //'
```

- 番号付きリストを表示して、ユーザーに選択を求めてください
- ローカルブランチが現在のブランチのみの場合は「比較可能なローカルブランチがありません」と伝えてください
- ユーザーが番号を選択したら、対応するブランチとの差分を調査してください
- 候補にない番号が入力された場合は「無効な番号です。もう一度番号を入力してください」と再入力を促してください

### 3. 差分の調査と分析

選択されたブランチとの差分を調査し、以下の情報を収集してください：

```bash
# 1. 差分の統計情報を取得
git diff ${selected_branch}...HEAD --stat

# 2. 変更されたファイル一覧を取得
git diff ${selected_branch}...HEAD --name-status

# 3. コミット履歴の差分を確認
git log ${selected_branch}..HEAD --oneline
git log HEAD..${selected_branch} --oneline

# 4. 未コミットの変更を確認（ある場合）
git diff --staged
git diff

# 5. 実際の差分内容を取得して分析
git diff ${selected_branch}...HEAD
```

収集した情報をもとに、以下を理解してください：

- 現在のブランチで追加/変更された機能
- 選択したブランチから分岐後の変更内容
- 未コミットの作業内容
- 今後の開発で注意すべき変更点
